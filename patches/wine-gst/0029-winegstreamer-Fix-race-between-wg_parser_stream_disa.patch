From b973dca99b8e88947e6cbbe698604eb184a15d6e Mon Sep 17 00:00:00 2001
From: Torge Matthies <openglfreak@googlemail.com>
Date: Mon, 3 Jun 2024 11:05:38 +0200
Subject: [PATCH 29/52] winegstreamer: Fix race between
 wg_parser_stream_disable and GST_EVENT_FLUSH_STOP.

CW-Bug-Id: #21644
---
 dlls/winegstreamer/wg_parser.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/dlls/winegstreamer/wg_parser.c b/dlls/winegstreamer/wg_parser.c
index 3c3adeee292..ce0accfc29d 100644
--- a/dlls/winegstreamer/wg_parser.c
+++ b/dlls/winegstreamer/wg_parser.c
@@ -1112,8 +1112,7 @@ static gboolean sink_event_cb(GstPad *pad, GstObject *parent, GstEvent *event)
             pthread_mutex_lock(&parser->mutex);
 
             stream->eos = false;
-            if (stream->enabled)
-                stream->flushing = false;
+            stream->flushing = false;
 
             pthread_mutex_unlock(&parser->mutex);
             break;
-- 
2.47.2

